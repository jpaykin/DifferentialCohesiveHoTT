\documentclass{article}
\input{preamble}

% use \draftfalse to turn off comments
% use \drafttrue to turn on comments (default)
\draftfalse

\title{Differential Cohesive Type Theory (Extended Abstract)\thanks{This
    material is based upon work supported by the National Science Foundation
    under Grant Number DMS 1321794.}}
\author{Jacob A.\,Gross}
\affil[1]{University of Pittsburgh}
\author[2]{Daniel R.\,Licata}
\affil[2]{Wesleyan University}
\author[3]{Max S.\, New}
\affil[3]{Northeastern University}
\author[4]{Jennifer Paykin}
\affil[4]{University of Pennsylvania}
\author[2]{Mitchell Riley}
\author[5]{Michael Shulman}
\affil[5]{University of San Diego}
\author[6]{Felix Wellen}
\affil[6]{Karlsruhe Institute of Technology}
\date{}

%\author{Jacob A.\,Gross \and Max S.\, New \and Jennifer Paykin \and Mitchell Riley
%  \and Felix Wellen \and Daniel R.\,Licata \and Michael Shulman}

\begin{document}
\maketitle

\JP{How to use comments: use your initials as a command to make a comment
  terminated by your name, \eg \texttt{\textbackslash JP\{my comments\}}. May
  also use \texttt{fixme}, \texttt{note}, \texttt{todo}, and \texttt{tocite}.
  You can change your keyword, color, etc in the preamble. To remove all
  comments, \eg when submitting, uncomment the \texttt{draftfalse}
  command in this document.}


As internal languages of toposes, type theories allow mathematicians to
reason \emph{synthetically} about mathematical structures in a concise and
natural way. While Homotopy Type Theory provides an internal language for
$(\infty,1)$-toposes, it is also possible to consider type theories that
correspond to $(\infty,1)$-toposes with extra structure of interest in algebraic
and differential geometry. In this work we consider type theories for
\emph{differential cohesive} and \emph{cohesive} structure, following a line of
work begun by \citet{Shulman2015} and \citet{Licata2016}.
% These provide the means to access the topological or smooth structure on
% spaces in a model internally.
In his real-cohesive type theory, the 0-type $\mathbb S^1$ for the topological
circle is different from the usual homotopy type $S^1$, but the two are
connected by the cohesive operation $\shape\,\mathbb S^1=S^1$, where $\shape$
maps a type to its path $\infty$-groupoid. This allows Shulman to use homotopy
theoretic statements about $S^1$ to prove Brower's fixed-point theorem---that
all continuous maps over the topological disk have a fixed point.

% This is just one example of what can be done using topological spaces
% constructed from the reals.

This line of work aims to go beyond cohesive type theories by constructing a
\emph{differential cohesive} homotopy type theory, which would allow synthetic
reasoning about smooth manifolds and their $\infty$-stack variants, which are of
great interest in current pure mathematics. For example,
\citet{SatiSchreiberStasheff2012} uses spaces locally modeled on 2- and 6-types.
These are supported by and can already be reasoned about in a fragment of
differential cohesive homotopy type theory used by \cite{Wellen2017} to develop
the basics of Cartan geometry. Furthermore, differential cohesive toposes are
used to great extent by \citet{Schreiber2013} to reason about spaces with
geometric structures of interest to modern physics, and the differential part of
differential cohesion plays an important part in algebraic geometry, as first
noted in the form of an adjoint triple by \citet{SimpsonTeleman}.

The type theory described here supports all operations of differential cohesion
arranged in a predictable pattern, but lacks dependent and identity types.
Future work will extend it to a true \emph{homotopy} type theory.

%\begin{wrapfigure}{TR}{0.4\textwidth}
\begin{figure}
\begin{center}
  \begin{tikzpicture}[node distance=2cm]
    \node (R) {$\Red$};
    \node[right of=R] (I) {$\Cored$};
    \node[right of=I] (E) {$\Wat$};
    \node[below of=I, node distance=1.6cm] (S) {$\shape$};
    \node[below of=E, node distance=1.6cm] (b) {$\flat$};
    \node[right of=b] (s) {$\sharp$};
  
    \path (R) to node {$\dashv$} (I);
    \path (I) to node {$\dashv$} (E);
    \path (S) to node {$\dashv$} (b);
    \path (b) to node {$\dashv$} (s);

    \path (I) to node {$\submodality$} (S);
    \path (E) to node {$\submodality$} (b);
  \end{tikzpicture}
\end{center}
\caption{On the bottom, the cohesive operations $\shape$ (the connected
  components with discrete topology on 1-toposes and the fundamental
  $\infty$-groupoid in the $(\infty,1)$-topos), $\flat$ (the underlying set with
  discrete topology), and $\sharp$ (the underlying set with codiscrete
  topology). On the top, the differential operations $\Red$ (the underlying
  space without infinitesimal directions), $\Cored$ (the underlying space where
  all maps out of it are trivial on tangent spaces), and $\Wat$ (on manifolds,
  this is just the discrete underlying set; applied to the right stacks, it
  might be a coefficient object for interesting cohomology theories). The
  inclusion symbol $F \subset G$ indicates that the image of $F$ is contained in
  the image of $G$.}
\label{fig:modalities}
%\end{wrapfigure}
\end{figure}


\paragraph{Cohesion in adjoint type theory.}

\citet{Shulman2015} constructs a variant of homotopy type theory for
$(\infty,1)$-toposes with an additional cohesive structure using a \emph{modal}
type theory~\citep{Pfenning2001} to describe the categorical structure of
cohesive $(\infty,1)$-toposes. This structure consists of three
\emph{modalities} that form the adjoint triple
$\shape \dashv \flat \dashv \sharp$ described in
\cref{fig:modalities}. In the type theory, variables are marked as either
\emph{cohesive} or \emph{crisp} depending on how they are used in a term---a
typing judgment $\Gamma \mid \Delta \vdash e : \tau$ is continuous on the
cohesive variables in $\Delta$, but may be discontinuous on the crisp variables
in $\Gamma$. The modalities $\flat$ and $\sharp$ are defined as type and term
formation and introduction rules, while $\shape$ is defined as a higher
inductive type.

In particular, \citeauthor{Shulman2015} defines $\shape$ as a localization with
respect to the Dedekind-reals. This approach admits useful constructions of
familiar topological spaces using the real numbers, including certain
topological spheres or disks, but it is also interesting to look at general
cohesion, where $\shape$ is not a priori linked to the Dedekind-reals. \FW{Maybe
  refer to what is happening below, i.e. the $\shape$,$\flat$,$\sharp$ modal
  type theory}



In a different approach, \citet{Licata2017} provide a general purpose
framework for (non-dependent) modal type theories, called \emph{adjoint type
  theory}, which we can instantiate with the three cohesive operations
independent of the Dedekind-reals. The result is a typing judgment with three
sorts of contexts, written $\Gamma \mid \Delta \mid \Xi \vdash e : \tau$, where
$\Gamma$ and $\Delta$ still hold crisp and cohesive variables, respectively, and
where $\Xi$ contains \emph{shapely} variables, which are constant on the
connected components of the topological structure. In particular, crisp
variables correspond directly to the modality $\flat$, while shapely variables
correspond to the modality $\shape$.


\paragraph{Differential cohesion in adjoint type theory.}

\begin{wrapfigure}{R}{0.31\textwidth}
\vspace{-4mm}
\begin{center} \begin{tabular}{lll}
    $\Gamma$ & crisp  &  $\flat$ \\
    $\Delta$ & reduced & $\Red$ \\
    $\Theta$ & differentially cohesive & \\
    $\Lambda$ & coreduced & $\Cored$ \\
    $\Xi$ & shapely & $\shape$
\end{tabular} \end{center}
\caption{Variable usage of the judgment
  $\Gamma \mid \Delta \mid \Theta \mid \Lambda \mid \Xi \vdash e : \tau$.}
\label{fig:contexts}
\end{wrapfigure}

To extend the type theory to differential cohesive toposes, we consider three
additional operations, described in the top row of \cref{fig:modalities}, in
addition to the cohesive operations. \citet{Wellen2017} extends HoTT
axiomatically with the $\Cored$ modality (similar to \citeauthor{Shulman2015}'s
approach to $\shape$) but the comonadic modalities $\Red$, $\Wat$, and (in the
case of ordinary cohesion) $\flat$ cannot be added axiomatically in the same
way. Further, Wellen's construction relies on a particular formulation of the
differentially cohesive real line, but it is unknown whether that can be defined
internally to the type theory; in typical models of differential cohesion, the
Dedekind reals do not correspond to the real line as a smooth space!


Our approach is thus to continue with \citet{Licata2017}'s adjoint type theory
framework to describe the differential operations, instead of
\citet{Shulman2015}'s more specialized type theory. We extend the typing
judgment to differential cohesive variables, where the judgment
$\Gamma \mid \Delta \mid \Theta \mid \Lambda \mid \Xi \vdash e : \tau$ uses six
different sorts of contexts, as described in \cref{fig:contexts}. We add the
modalities $\Red$, $\Cored$, and $\Wat$ to this judgment as inference rules
following \citeauthor{Licata2017}'s framework. Crucially, because the type
theory is derived algorithmically from this framework, we get
meta-theoretic results for substitution and structural rules for free!

% In fact, the type theory for differential cohesion covers not just the three
% differential modalities, but also the three cohesive modalities. Thus, Shulman's
% construction cannot be extended directly from real to differential cohesion---
% and in typical models of differential cohesion, the Dedekind reals do not
% correspond to the real line as a smooth space! Furthermore, it is not known if
% there is a way to define the differentially cohesive real line internally to
% the type theory.


% And it is sometimes better, to also implement the monadic modalities by
% modifying the rules instead of adding axioms.


\paragraph{Where are the homotopies?}
Future work will extend this type theory to dependent and identity types, but
this is not a straightforward task because of the dependency structure of a
differential cohesive type. In \citet{Shulman2015}'s type theory, cohesive
variables can depend on crisp variables but not vice versa; in a dependent
version of adjoint cohesive type theory, both crisp and cohesive variables will
also depend on shapely variables, and vice versa, which causes problems when
constructing terms and types. The same dependency problem
arises in the differential case. The solution will require a
more nuanced view on the dependency graph of a type, but we are confident it is
surmountable in future work.

% Using a bibstyle that is compatible with author/year citations and also the
% eprint field (for arXiv)
\bibliographystyle{hplain}
\bibliography{bibliography}

\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
