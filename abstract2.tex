\documentclass{article}
\input{preamble}

% use \draftfalse to turn off comments
% use \drafttrue to turn on comments (default)
\draftfalse

\title{Differential Cohesive Type Theory (Extended Abstract)\thanks{This
    material is based upon work supported by the National Science Foundation
    under Grant Number DMS 1321794.}}
\author{Jacob A.\,Gross}
\affil[1]{University of Pittsburgh}
\author[2]{Daniel R.\,Licata}
\affil[2]{Wesleyan University}
\author[3]{Max S.\, New}
\affil[3]{Northeastern University}
\author[4]{Jennifer Paykin}
\affil[4]{University of Pennsylvania}
\author[2]{Mitchell Riley}
\author[5]{Michael Shulman}
\affil[5]{University of San Diego}
\author[6]{Felix Wellen}
\affil[6]{Karlsruhe Institute of Technology}
\date{}

%\author{Jacob A.\,Gross \and Max S.\, New \and Jennifer Paykin \and Mitchell Riley
%  \and Felix Wellen \and Daniel R.\,Licata \and Michael Shulman}

\begin{document}
\maketitle

\JP{How to use comments: use your initials as a command to make a comment
  terminated by your name, \eg \texttt{\textbackslash JP\{my comments\}}. May
  also use \texttt{fixme}, \texttt{note}, \texttt{todo}, and \texttt{tocite}.
  You can change your keyword, color, etc in the preamble. To remove all
  comments, \eg when submitting, uncomment the \texttt{draftfalse}
  command in this document.}

As internal languages of toposes, type theories allow mathematicians to
reason \emph{synthetically} about mathematical structures in a concise,
natural, and computer-checkable way.  The basic system of homotopy type
theory (Martin-L\"of type theory extended with higher inductive types
and Voevodsky's univalence axiom) provides an internal language for
$(\infty,1)$-toposes, and has enabled a significant line of work on
synthetic homotopy theory.  However, some mathematics of interest is
difficult to formulate synthetically in this basic setting, which has
prompted the investigation of extensions of homotopy type theory to
describe $(\infty,1)$-toposes with extra structure.  For example,
real-cohesive homotopy type theory~\citep{Shulman2015} equips each type
with a synthetic notion of topology, in addition to the homotopy
structure given by the path type.  Operations on these topologies are
expressed by three modalities $\flat A$ (retopologize the type $A$
discretely), $\sharp A$ (retopologize the type $A$ codiscretely), and
$\shape A$ (make topological paths into homotopical paths), which form
an adjoint triple $\shape \dashv \flat \dashv \sharp$.  These modalities
allow synthetic homotopy theory to be used to prove topological
statements, e.g. proving the Brouwer fixed-point theorem---that all
continuous maps over the \emph{topological} disk have a fixed
point---using the synthetic proof of $\pi_1(S^1) = \mathbb{Z}$ for the
\emph{homotopical} (higher-inductive) circle.

The concept of cohesive toposes can be extended to \emph{differential
  cohesive toposes}, which express extra structure that is of interest
in algebraic and differential geometry.  Examples of differential
cohesive toposes include smooth manifolds and their $\infty$-stack
variants, which are of great interest in current pure mathematics. For
example, \citet{SatiSchreiberStasheff2012} use spaces locally modeled
on 2- and 6-types.  Furthermore, differential cohesive toposes are used
to great extent by \citet{Schreiber2013} to reason about spaces with
geometric structures of interest to modern physics, and the differential
part of differential cohesion plays an important part in algebraic
geometry, as first noted in the form of an adjoint triple by
\citet{SimpsonTeleman}.  In addition to the cohesive modalities
$\shape$, $\flat$, and $\sharp$, differential cohesion adds three more
modalities, $\Red$, $\Cored$, and $\Wat$, which axiomatize an abstract
notion of \emph{infinitesimal direction} that is used to access the
differential structure.  For example, $\Red A$ is the underlying space
of $A$ without infinitesimal directions, while $\Cored A$ is the
underlying space of $A$ but with all maps made trivial on tangent
spaces.  $\Red$ and $\Wat$ are comonadic modalities, while $\Cored$ is a
monadic modality; they form an adjoint triple $\Red \dashv \Cored \dashv
\Wat$; and they have certain relationships with the cohesive modalities
(e.g. $\shape$ is contained in $\Cored$ and $\flat$ is contained in
$\Wat$).  Initial work by \citet{Wellen2017} postulates a monadic
modality $\Cored$ in standard homotopy type theory and develops the
basics of Cartan geometry, which suggests that enriching homotopy type
theory with the differential cohesion modalities could be a useful tool
for working synthetically in this setting.
 
%%  and $\Wat A$ (on manifolds, this is just the discrete
%% underlying set; applied to the right stacks, it might be a coefficient
%% object for interesting cohomology theories).

In this work, we begin an investigation of extensions of type theory to
express differential cohesion.  A central challenge is to design a type
theory with all six type operators, the cohesive modalities $\shape$,
$\flat$, and $\sharp$ as well as the differential modalities $\Red$,
$\Cored$, and $\Wat$, all with the desired properties and relationships
to each other.  Because $\flat$ and $\Red$ and $\Wat$ are comonadic
modalities, which (unlike monadic modalities) cannot be
postulated~\citep{Shulman2015}, this design must involve changing the
judgement structure of the type theory.  In our talk, we can report on a
simply-typed $\lambda$-calculus that describes the structure of the six
modalities as functors on closed types/contexts, which we have designed
using recent work on adjoint type theory~\citep{Licata2017}.  We can
also describe work-in-progress to express the fiberwise behavior of
these modalities on dependent types.

%\begin{wrapfigure}{TR}{0.4\textwidth}
%% \begin{figure}
%% \begin{center}
%%   \begin{tikzpicture}[node distance=2cm]
%%     \node (R) {$\Red$};
%%     \node[right of=R] (I) {$\Cored$};
%%     \node[right of=I] (E) {$\Wat$};
%%     \node[below of=I, node distance=1.6cm] (S) {$\shape$};
%%     \node[below of=E, node distance=1.6cm] (b) {$\flat$};
%%     \node[right of=b] (s) {$\sharp$};
  
%%     \path (R) to node {$\dashv$} (I);
%%     \path (I) to node {$\dashv$} (E);
%%     \path (S) to node {$\dashv$} (b);
%%     \path (b) to node {$\dashv$} (s);

%%     \path (I) to node {$\submodality$} (S);
%%     \path (E) to node {$\submodality$} (b);
%%   \end{tikzpicture}
%% \end{center}
%% \caption{On the bottom, the cohesive operations $\shape$ (the connected
%%   components with discrete topology on 1-toposes and the fundamental
%%   $\infty$-groupoid in the $(\infty,1)$-topos), $\flat$ (the underlying set with
%%   discrete topology), and $\sharp$ (the underlying set with codiscrete
%%   topology). On the top, the differential operations $\Red$ (the underlying
%%   space without infinitesimal directions), $\Cored$ (the underlying space where
%%   all maps out of it are trivial on tangent spaces), and $\Wat$ (on manifolds,
%%   this is just the discrete underlying set; applied to the right stacks, it
%%   might be a coefficient object for interesting cohomology theories). The
%%   inclusion symbol $F \subset G$ indicates that the image of $F$ is contained in
%%   the image of $G$.}
%% \label{fig:modalities}
%% %\end{wrapfigure}
%% \end{figure}

\paragraph{Contributions.}  Real-cohesive homotopy type
theory~\citet{Shulman2015} includes a subsystem \emph{spatial type
  theory} with only the $\flat$ and $\sharp$ modalities, where the
$\flat$ comonadic modality is represented by rules similar to the
judgemental presentation of a necessitation modality in modal
logic~\citep{Pfenning2001}.  A special kind of \emph{crisp} variable is
used to define the $\flat$ type, while ordinary variables are called
\emph{cohesive}, and a typing judgment $\Gamma \mid \Delta \vdash e :
\tau$ is continuous on the cohesive variables in $\Delta$, but may be
discontinuous on the crisp variables in $\Gamma$.  While the $\flat$ and
$\sharp$ modalities are basic type constructors, the $\shape$
(fundamental $\infty$-groupoid, turning topological paths into homotopy
paths) is defined as a higher inductive type, a localization
(nullification) with respect to the Dedekind-reals.  This approach
admits useful constructions of familiar topological spaces using the
real numbers, including certain topological spheres or disks.

However, in general differential cohesion, it is not clear that $\shape$
should be axiomatized as a localization (in typical models of
differential cohesion, the Dedekind reals do not correspond to the real
line as a smooth space), so our first contribution is to formulate an
abstract shape modality.  We have given a \emph{mode theory} in adjoint
logic~\citep{Licata2017} that expresses all three cohesive modalities,
and because cut elimination/normalization holds for all mode theories in
adjoint logic, we obtain it as a corollary.  We have also investigated a
simpler presentation of the rules of adjoint logic specialized to this
mode theory, resulting in a typing judgment with three sorts of
contexts, written $\Gamma \mid \Delta \mid \Xi \vdash e : \tau$.  Here,
$\Gamma$ and $\Delta$ still hold crisp and cohesive variables,
respectively, and where $\Xi$ contains \emph{shapely} variables, which
are constant on the connected components of the topological structure.
Crisp variables correspond to the modality $\flat$, while shapely
variables correspond to the modality $\shape$.

Our second contribution is to extend this to the differential cohesive
modalities.  We have given a mode theory in adjoint type theory for this
and again unpacked a nice formulation of the specialized rules.  The
result is a judgment $\Gamma \mid \Delta \mid \Theta \mid \Lambda \mid
\Xi \vdash e : \tau$ that uses five different sorts of contexts,
corresponding to the modalities $\flat$, $\Red$, identity, $\Cored$, and
$\shape$ respectively.  The rules for the cohesive and differential
cohesive types manipulate these contexts in subtle ways, which express
the relationships between the modalities.

In work in progress, we are extending this type theory to dependent
types, which is not straightforward because of the dependency structure
of the differential cohesive types.  For example, in spatial type
theory~\citep{Shulman2015}, cohesive variables can depend on crisp
variables but not vice versa; but in our reformulation both crisp and
cohesive variables will also depend on shapely variables, and vice
versa.  Accounting for this will require a more nuanced view on the
dependency graph of contexts and types.

%% To extend the type theory to differential cohesive toposes, we consider
%% three additional operations, described in the top row of
%% \cref{fig:modalities}, in addition to the cohesive operations.
%% \citet{Wellen2017} extends HoTT axiomatically with the $\Cored$ modality
%% (similar to \citeauthor{Shulman2015}'s approach to $\shape$) but the
%% comonadic modalities $\Red$, $\Wat$, and (in the case of ordinary
%% cohesion) $\flat$ cannot be added axiomatically in the same
%% way. Further, Wellen's construction relies on a particular formulation
%% of the differentially cohesive real line, but it is unknown whether that
%% can be defined internally to the type theory; in typical models of
%% differential cohesion, the Dedekind reals do not correspond to the real
%% line as a smooth space!

%% Our approach is thus to continue with \citet{Licata2017}'s adjoint
%% type theory framework to describe the differential operations,
%% instead of \citet{Shulman2015}'s more specialized type theory.

% In fact, the type theory for differential cohesion covers not just the
% three differential modalities, but also the three cohesive
% modalities. Thus, Shulman's construction cannot be extended directly
% from real to differential cohesion--- and in typical models of
% differential cohesion, the Dedekind reals do not correspond to the
% real line as a smooth space! Furthermore, it is not known if there is
% a way to define the differentially cohesive real line internally to
% the type theory.

% And it is sometimes better, to also implement the monadic modalities by
% modifying the rules instead of adding axioms.

%% \begin{wrapfigure}{L}{0.31\textwidth}
%% $\Gamma$ & crisp  &  $\flat$ \\
%% $\Delta$ & reduced & $\Red$ \\
%% $\Theta$ & differentially cohesive & \\
%% $\Lambda$ & coreduced & $\Cored$ \\
%% $\Xi$ & shapely & $\shape$
%% \caption{Variable usage of the judgment
%%   $\Gamma \mid \Delta \mid \Theta \mid \Lambda \mid \Xi \vdash e : \tau$.}
%% \label{fig:contexts}
%% \end{wrapfigure}

% Using a bibstyle that is compatible with author/year citations and also the
% eprint field (for arXiv)
\bibliographystyle{hplain}
\bibliography{bibliography}

\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
